(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var ee,N,Ge,j,xe,ze,Qe,Ye,be,ue,he,Xe,X={},Ze=[],gn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ne=Array.isArray;function M(e,n){for(var r in n)e[r]=n[r];return e}function ye(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function en(e,n,r){var a,s,i,o={};for(i in n)i=="key"?a=n[i]:i=="ref"?s=n[i]:o[i]=n[i];if(arguments.length>2&&(o.children=arguments.length>3?ee.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return z(e,o,a,s,null)}function z(e,n,r,a,s){var i={type:e,props:n,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Ge,__i:-1,__u:0};return s==null&&N.vnode!=null&&N.vnode(i),i}function te(e){return e.children}function Q(e,n){this.props=e,this.context=n}function J(e,n){if(n==null)return e.__?J(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?J(e):null}function nn(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return nn(e)}}function _e(e){(!e.__d&&(e.__d=!0)&&j.push(e)&&!oe.__r++||xe!=N.debounceRendering)&&((xe=N.debounceRendering)||ze)(oe)}function oe(){for(var e,n,r,a,s,i,o,u=1;j.length;)j.length>u&&j.sort(Qe),e=j.shift(),u=j.length,e.__d&&(r=void 0,a=void 0,s=(a=(n=e).__v).__e,i=[],o=[],n.__P&&((r=M({},a)).__v=a.__v+1,N.vnode&&N.vnode(r),Ne(n.__P,r,a,n.__n,n.__P.namespaceURI,32&a.__u?[s]:null,i,s??J(a),!!(32&a.__u),o),r.__v=a.__v,r.__.__k[r.__i]=r,an(i,r,o),a.__e=a.__=null,r.__e!=s&&nn(r)));oe.__r=0}function tn(e,n,r,a,s,i,o,u,_,c,h){var l,p,f,v,w,m,g,b=a&&a.__k||Ze,C=n.length;for(_=vn(r,n,b,_,C),l=0;l<C;l++)(f=r.__k[l])!=null&&(p=f.__i==-1?X:b[f.__i]||X,f.__i=l,m=Ne(e,f,p,s,i,o,u,_,c,h),v=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&we(p.ref,null,f),h.push(f.ref,f.__c||v,f)),w==null&&v!=null&&(w=v),(g=!!(4&f.__u))||p.__k===f.__k?_=rn(f,_,e,g):typeof f.type=="function"&&m!==void 0?_=m:v&&(_=v.nextSibling),f.__u&=-7);return r.__e=w,_}function vn(e,n,r,a,s){var i,o,u,_,c,h=r.length,l=h,p=0;for(e.__k=new Array(s),i=0;i<s;i++)(o=n[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(_=i+p,(o=e.__k[i]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?z(null,o,null,null,null):ne(o)?z(te,{children:o},null,null,null):o.constructor==null&&o.__b>0?z(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,u=null,(c=o.__i=bn(o,r,_,l))!=-1&&(l--,(u=r[c])&&(u.__u|=2)),u==null||u.__v==null?(c==-1&&(s>h?p--:s<h&&p++),typeof o.type!="function"&&(o.__u|=4)):c!=_&&(c==_-1?p--:c==_+1?p++:(c>_?p--:p++,o.__u|=4))):e.__k[i]=null;if(l)for(i=0;i<h;i++)(u=r[i])!=null&&(2&u.__u)==0&&(u.__e==a&&(a=J(u)),sn(u,u));return a}function rn(e,n,r,a){var s,i;if(typeof e.type=="function"){for(s=e.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=e,n=rn(s[i],n,r,a));return n}e.__e!=n&&(a&&(n&&e.type&&!n.parentNode&&(n=J(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function pe(e,n){return n=n||[],e==null||typeof e=="boolean"||(ne(e)?e.some(function(r){pe(r,n)}):n.push(e)),n}function bn(e,n,r,a){var s,i,o,u=e.key,_=e.type,c=n[r],h=c!=null&&(2&c.__u)==0;if(c===null&&e.key==null||h&&u==c.key&&_==c.type)return r;if(a>(h?1:0)){for(s=r-1,i=r+1;s>=0||i<n.length;)if((c=n[o=s>=0?s--:i++])!=null&&(2&c.__u)==0&&u==c.key&&_==c.type)return o}return-1}function Te(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||gn.test(n)?r:r+"px"}function ie(e,n,r,a,s){var i,o;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof a=="string"&&(e.style.cssText=a=""),a)for(n in a)r&&n in r||Te(e.style,n,"");if(r)for(n in r)a&&r[n]==a[n]||Te(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")i=n!=(n=n.replace(Ye,"$1")),o=n.toLowerCase(),n=o in e||n=="onFocusOut"||n=="onFocusIn"?o.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+i]=r,r?a?r.u=a.u:(r.u=be,e.addEventListener(n,i?he:ue,i)):e.removeEventListener(n,i?he:ue,i);else{if(s=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Ie(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=be++;else if(n.t<r.u)return;return r(N.event?N.event(n):n)}}}function Ne(e,n,r,a,s,i,o,u,_,c){var h,l,p,f,v,w,m,g,b,C,$,H,R,W,x,L,V,F=n.type;if(n.constructor!=null)return null;128&r.__u&&(_=!!(32&r.__u),i=[u=n.__e=r.__e]),(h=N.__b)&&h(n);e:if(typeof F=="function")try{if(g=n.props,b="prototype"in F&&F.prototype.render,C=(h=F.contextType)&&a[h.__c],$=h?C?C.props.value:h.__:a,r.__c?m=(l=n.__c=r.__c).__=l.__E:(b?n.__c=l=new F(g,$):(n.__c=l=new Q(g,$),l.constructor=F,l.render=Nn),C&&C.sub(l),l.props=g,l.state||(l.state={}),l.context=$,l.__n=a,p=l.__d=!0,l.__h=[],l._sb=[]),b&&l.__s==null&&(l.__s=l.state),b&&F.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=M({},l.__s)),M(l.__s,F.getDerivedStateFromProps(g,l.__s))),f=l.props,v=l.state,l.__v=n,p)b&&F.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),b&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(b&&F.getDerivedStateFromProps==null&&g!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(g,$),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(g,l.__s,$)===!1||n.__v==r.__v){for(n.__v!=r.__v&&(l.props=g,l.state=l.__s,l.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(I){I&&(I.__=n)}),H=0;H<l._sb.length;H++)l.__h.push(l._sb[H]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(g,l.__s,$),b&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,v,w)})}if(l.context=$,l.props=g,l.__P=e,l.__e=!1,R=N.__r,W=0,b){for(l.state=l.__s,l.__d=!1,R&&R(n),h=l.render(l.props,l.state,l.context),x=0;x<l._sb.length;x++)l.__h.push(l._sb[x]);l._sb=[]}else do l.__d=!1,R&&R(n),h=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++W<25);l.state=l.__s,l.getChildContext!=null&&(a=M(M({},a),l.getChildContext())),b&&!p&&l.getSnapshotBeforeUpdate!=null&&(w=l.getSnapshotBeforeUpdate(f,v)),L=h,h!=null&&h.type===te&&h.key==null&&(L=ln(h.props.children)),u=tn(e,ne(L)?L:[L],n,r,a,s,i,o,u,_,c),l.base=n.__e,n.__u&=-161,l.__h.length&&o.push(l),m&&(l.__E=l.__=null)}catch(I){if(n.__v=null,_||i!=null)if(I.then){for(n.__u|=_?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;i[i.indexOf(u)]=null,n.__e=u}else{for(V=i.length;V--;)ye(i[V]);fe(n)}else n.__e=r.__e,n.__k=r.__k,I.then||fe(n);N.__e(I,n,r)}else i==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):u=n.__e=yn(r.__e,n,r,a,s,i,o,_,c);return(h=N.diffed)&&h(n),128&n.__u?void 0:u}function fe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(fe)}function an(e,n,r){for(var a=0;a<r.length;a++)we(r[a],r[++a],r[++a]);N.__c&&N.__c(n,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){N.__e(i,s.__v)}})}function ln(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:ne(e)?e.map(ln):M({},e)}function yn(e,n,r,a,s,i,o,u,_){var c,h,l,p,f,v,w,m=r.props,g=n.props,b=n.type;if(b=="svg"?s="http://www.w3.org/2000/svg":b=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((f=i[c])&&"setAttribute"in f==!!b&&(b?f.localName==b:f.nodeType==3)){e=f,i[c]=null;break}}if(e==null){if(b==null)return document.createTextNode(g);e=document.createElementNS(s,b,g.is&&g),u&&(N.__m&&N.__m(n,i),u=!1),i=null}if(b==null)m===g||u&&e.data==g||(e.data=g);else{if(i=i&&ee.call(e.childNodes),m=r.props||X,!u&&i!=null)for(m={},c=0;c<e.attributes.length;c++)m[(f=e.attributes[c]).name]=f.value;for(c in m)if(f=m[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=f;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;ie(e,c,null,f,s)}}for(c in g)f=g[c],c=="children"?p=f:c=="dangerouslySetInnerHTML"?h=f:c=="value"?v=f:c=="checked"?w=f:u&&typeof f!="function"||m[c]===f||ie(e,c,f,m[c],s);if(h)u||l&&(h.__html==l.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(l&&(e.innerHTML=""),tn(n.type=="template"?e.content:e,ne(p)?p:[p],n,r,a,b=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,o,i?i[0]:r.__k&&J(r,0),u,_),i!=null)for(c=i.length;c--;)ye(i[c]);u||(c="value",b=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[c]||b=="progress"&&!v||b=="option"&&v!=m[c])&&ie(e,c,v,m[c],s),c="checked",w!=null&&w!=e[c]&&ie(e,c,w,m[c],s))}return e}function we(e,n,r){try{if(typeof e=="function"){var a=typeof e.__u=="function";a&&e.__u(),a&&n==null||(e.__u=e(n))}else e.current=n}catch(s){N.__e(s,r)}}function sn(e,n,r){var a,s;if(N.unmount&&N.unmount(e),(a=e.ref)&&(a.current&&a.current!=e.__e||we(a,null,n)),(a=e.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(i){N.__e(i,n)}a.base=a.__P=null}if(a=e.__k)for(s=0;s<a.length;s++)a[s]&&sn(a[s],n,r||typeof e.type!="function");r||ye(e.__e),e.__c=e.__=e.__e=void 0}function Nn(e,n,r){return this.constructor(e,r)}function wn(e,n,r){var a,s,i,o;n==document&&(n=document.documentElement),N.__&&N.__(e,n),s=(a=!1)?null:n.__k,i=[],o=[],Ne(n,e=n.__k=en(te,null,[e]),s||X,X,n.namespaceURI,s?null:n.firstChild?ee.call(n.childNodes):null,i,s?s.__e:n.firstChild,a,o),an(i,e,o)}function kn(e,n,r){var a,s,i,o,u=M({},e.props);for(i in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),n)i=="key"?a=n[i]:i=="ref"?s=n[i]:u[i]=n[i]===void 0&&o!=null?o[i]:n[i];return arguments.length>2&&(u.children=arguments.length>3?ee.call(arguments,2):r),z(e.type,u,a||e.key,s||e.ref,null)}function on(e){function n(r){var a,s;return this.getChildContext||(a=new Set,(s={})[n.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){a=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&a.forEach(function(o){o.__e=!0,_e(o)})},this.sub=function(i){a.add(i);var o=i.componentWillUnmount;i.componentWillUnmount=function(){a&&a.delete(i),o&&o.call(i)}}),r.children}return n.__c="__cC"+Xe++,n.__=e,n.Provider=n.__l=(n.Consumer=function(r,a){return r.children(a)}).contextType=n,n}ee=Ze.slice,N={__e:function(e,n,r,a){for(var s,i,o;n=n.__;)if((s=n.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,a||{}),o=s.__d),o)return s.__E=s}catch(u){e=u}throw e}},Ge=0,Q.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=M({},this.state),typeof e=="function"&&(e=e(M({},r),this.props)),e&&M(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),_e(this))},Q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_e(this))},Q.prototype.render=te,j=[],ze=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qe=function(e,n){return e.__v.__b-n.__v.__b},oe.__r=0,Ye=/(PointerCapture)$|Capture$/i,be=0,ue=Ie(!1),he=Ie(!0),Xe=0;var An=0;function t(e,n,r,a,s,i){n||(n={});var o,u,_=n;if("ref"in _)for(u in _={},n)u=="ref"?o=n[u]:_[u]=n[u];var c={type:e,props:_,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--An,__i:-1,__u:0,__source:s,__self:i};if(typeof e=="function"&&(o=e.defaultProps))for(u in o)_[u]===void 0&&(_[u]=o[u]);return N.vnode&&N.vnode(c),c}var Z,A,de,Me,me=0,cn=[],P=N,He=P.__b,Oe=P.__r,Re=P.diffed,We=P.__c,Be=P.unmount,je=P.__;function ke(e,n){P.__h&&P.__h(A,e,me||n),me=0;var r=A.__H||(A.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function y(e){return me=1,Pn(dn,e)}function Pn(e,n,r){var a=ke(Z++,2);if(a.t=e,!a.__c&&(a.__=[dn(void 0,n),function(u){var _=a.__N?a.__N[0]:a.__[0],c=a.t(_,u);_!==c&&(a.__N=[c,a.__[1]],a.__c.setState({}))}],a.__c=A,!A.__f)){var s=function(u,_,c){if(!a.__c.__H)return!0;var h=a.__c.__H.__.filter(function(p){return!!p.__c});if(h.every(function(p){return!p.__N}))return!i||i.call(this,u,_,c);var l=a.__c.props!==u;return h.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(l=!0)}}),i&&i.call(this,u,_,c)||l};A.__f=!0;var i=A.shouldComponentUpdate,o=A.componentWillUpdate;A.componentWillUpdate=function(u,_,c){if(this.__e){var h=i;i=void 0,s(u,_,c),i=h}o&&o.call(this,u,_,c)},A.shouldComponentUpdate=s}return a.__N||a.__}function K(e,n){var r=ke(Z++,3);!P.__s&&Un(r.__H,n)&&(r.__=e,r.u=n,A.__H.__h.push(r))}function Cn(e){var n=A.context[e.__c],r=ke(Z++,9);return r.c=e,n?(r.__==null&&(r.__=!0,n.sub(A)),n.props.value):e.__}function $n(){for(var e;e=cn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(se),e.__H.__h.forEach(ge),e.__H.__h=[]}catch(n){e.__H.__h=[],P.__e(n,e.__v)}}P.__b=function(e){A=null,He&&He(e)},P.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),je&&je(e,n)},P.__r=function(e){Oe&&Oe(e),Z=0;var n=(A=e.__c).__H;n&&(de===A?(n.__h=[],A.__h=[],n.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.forEach(se),n.__h.forEach(ge),n.__h=[],Z=0)),de=A},P.diffed=function(e){Re&&Re(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(cn.push(n)!==1&&Me===P.requestAnimationFrame||((Me=P.requestAnimationFrame)||Sn)($n)),n.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),de=A=null},P.__c=function(e,n){n.some(function(r){try{r.__h.forEach(se),r.__h=r.__h.filter(function(a){return!a.__||ge(a)})}catch(a){n.some(function(s){s.__h&&(s.__h=[])}),n=[],P.__e(a,r.__v)}}),We&&We(e,n)},P.unmount=function(e){Be&&Be(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(a){try{se(a)}catch(s){n=s}}),r.__H=void 0,n&&P.__e(n,r.__v))};var qe=typeof requestAnimationFrame=="function";function Sn(e){var n,r=function(){clearTimeout(a),qe&&cancelAnimationFrame(n),setTimeout(e)},a=setTimeout(r,35);qe&&(n=requestAnimationFrame(r))}function se(e){var n=A,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),A=n}function ge(e){var n=A;e.__c=e.__(),A=n}function Un(e,n){return!e||e.length!==n.length||n.some(function(r,a){return r!==e[a]})}function dn(e,n){return typeof n=="function"?n(e):n}var Ln={};function le(e,n){for(var r in n)e[r]=n[r];return e}function Dn(e,n,r){var a,s=/(?:\?([^#]*))?(#.*)?$/,i=e.match(s),o={};if(i&&i[1])for(var u=i[1].split("&"),_=0;_<u.length;_++){var c=u[_].split("=");o[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=ve(e.replace(s,"")),n=ve(n||"");for(var h=Math.max(e.length,n.length),l=0;l<h;l++)if(n[l]&&n[l].charAt(0)===":"){var p=n[l].replace(/(^:|[+*?]+$)/g,""),f=(n[l].match(/[+*?]+$/)||Ln)[0]||"",v=~f.indexOf("+"),w=~f.indexOf("*"),m=e[l]||"";if(!m&&!w&&(f.indexOf("?")<0||v)){a=!1;break}if(o[p]=decodeURIComponent(m),v||w){o[p]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(n[l]!==e[l]){a=!1;break}return(r.default===!0||a!==!1)&&o}function Fn(e,n){return e.rank<n.rank?1:e.rank>n.rank?-1:e.index-n.index}function En(e,n){return e.index=n,e.rank=(function(r){return r.props.default?0:ve(r.props.path).map(xn).join("")})(e),e.props}function ve(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function xn(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Tn={},q=[],Ke=[],E=null,un={url:Ae()},In=on(un);function Ae(){var e;return""+((e=E&&E.location?E.location:E&&E.getCurrentLocation?E.getCurrentLocation():typeof location<"u"?location:Tn).pathname||"")+(e.search||"")}function D(e,n){return n===void 0&&(n=!1),typeof e!="string"&&e.url&&(n=e.replace,e=e.url),(function(r){for(var a=q.length;a--;)if(q[a].canRoute(r))return!0;return!1})(e)&&(function(r,a){a===void 0&&(a="push"),E&&E[a]?E[a](r):typeof history<"u"&&history[a+"State"]&&history[a+"State"](null,null,r)})(e,n?"replace":"push"),hn(e)}function hn(e){for(var n=!1,r=0;r<q.length;r++)q[r].routeTo(e)&&(n=!0);return n}function Mn(e){if(e&&e.getAttribute){var n=e.getAttribute("href"),r=e.getAttribute("target");if(n&&n.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return D(n)}}function Hn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function On(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var n=e.target;do if(n.localName==="a"&&n.getAttribute("href")){if(n.hasAttribute("data-native")||n.hasAttribute("native"))return;if(Mn(n))return Hn(e)}while(n=n.parentNode)}}var Ve=!1;function _n(e){e.history&&(E=e.history),this.state={url:e.url||Ae()}}le(_n.prototype=new Q,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var n=pe(this.props.children);return this.g(n,e)!==void 0},routeTo:function(e){this.setState({url:e});var n=this.canRoute(e);return this.p||this.forceUpdate(),n},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Ve||(Ve=!0,E||addEventListener("popstate",function(){hn(Ae())}),addEventListener("click",On)),q.push(this),E&&(this.u=E.listen(function(n){var r=n.location||n;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),q.splice(q.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,n){e=e.filter(En).sort(Fn);for(var r=0;r<e.length;r++){var a=e[r],s=Dn(n,a.props.path,a.props);if(s)return[a,s]}},render:function(e,n){var r,a,s=e.onChange,i=n.url,o=this.c,u=this.g(pe(e.children),i);if(u&&(a=kn(u[0],le(le({url:i,matches:r=u[1]},r),{key:void 0,ref:void 0}))),i!==(o&&o.url)){le(un,o=this.c={url:i,previous:o&&o.url,current:a,path:a?a.props.path:null,matches:r}),o.router=this,o.active=a?[a]:[];for(var _=Ke.length;_--;)Ke[_]({});typeof s=="function"&&s(o)}return en(In.Provider,{value:o},a)}});let pn="/api";function Je(e){pn=e}class Rn extends Error{constructor(n,r,a){super(n),this.status=r,this.detail=a,this.name="APIError"}}async function ce(e,n={}){const r=`${pn}${e}`,a=await fetch(r,{...n,credentials:"include",headers:{"Content-Type":"application/json",...n.headers}});if(!a.ok){const s=await a.json().catch(()=>({detail:"Unknown error"}));throw new Rn(s.detail||`HTTP ${a.status}`,a.status,s)}return a.status===204?null:a.json()}function O(e){return ce(e,{method:"GET"})}function T(e,n){return ce(e,{method:"POST",body:n?JSON.stringify(n):void 0})}function Wn(e,n){return ce(e,{method:"PUT",body:n?JSON.stringify(n):void 0})}function Bn(e){return ce(e,{method:"DELETE"})}const jn={health:()=>O("/health"),config:()=>O("/auth/config"),me:()=>O("/auth/me"),registerBegin:e=>T("/auth/webauthn/register/begin",e),registerFinish:e=>T("/auth/webauthn/register/finish",e),loginBegin:e=>T("/auth/webauthn/login/begin",{identifier:e}),loginFinish:e=>T("/auth/webauthn/login/finish",{credential:e}),bootstrapLogin:e=>T("/auth/token/bootstrap",{token:e}),logout:()=>T("/auth/logout")},qn={getProfile:()=>O("/users/me"),updateProfile:e=>Wn("/users/me",e),getAuthMethods:()=>O("/users/me/auth-methods"),deleteAuthMethod:e=>Bn(`/users/me/auth-methods/${e}`)},Kn={createToken:e=>T("/m2m/token/create",e||{}),refreshToken:e=>T("/m2m/token/refresh",{refresh_token:e}),validateToken:e=>T("/m2m/token/validate",{token:e})},Vn={listUsers:e=>{const n=new URLSearchParams;e!=null&&e.enabled_only&&n.append("enabled_only","true"),(e==null?void 0:e.offset)!==void 0&&n.append("offset",e.offset.toString()),(e==null?void 0:e.limit)!==void 0&&n.append("limit",e.limit.toString());const r=n.toString();return O(`/admin/users${r?`?${r}`:""}`)},getUser:e=>O(`/admin/users/${e}`),toggleUser:(e,n)=>T(`/admin/users/${e}/toggle`,{enabled:n}),getUserAuthMethods:e=>O(`/admin/users/${e}/auth-methods`),approveAuthMethod:(e,n)=>T(`/admin/auth-methods/${e}/approve`,{approved:n}),toggleAuthMethod:(e,n)=>T(`/admin/auth-methods/${e}/toggle`,{enabled:n}),getPendingApprovals:()=>O("/admin/auth-methods/pending")},S={auth:jn,user:qn,m2m:Kn,admin:Vn};function B(e){const n=new Uint8Array(e);let r="";for(let s=0;s<n.byteLength;s++)r+=String.fromCharCode(n[s]);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Y(e){let n=e.replace(/-/g,"+").replace(/_/g,"/");for(;n.length%4;)n+="=";const r=atob(n),a=new Uint8Array(r.length);for(let s=0;s<r.length;s++)a[s]=r.charCodeAt(s);return a.buffer}async function Jn(e){var s;const n={challenge:Y(e.challenge),rp:{id:e.rp.id,name:e.rp.name},user:{id:Y(e.user.id),name:e.user.name,displayName:e.user.displayName},pubKeyCredParams:e.pubKeyCredParams,timeout:e.timeout||6e4,attestation:e.attestation||"none",authenticatorSelection:e.authenticatorSelection||{authenticatorAttachment:"platform",residentKey:"preferred",userVerification:"preferred"},excludeCredentials:(s=e.excludeCredentials)==null?void 0:s.map(i=>({id:Y(i.id),type:"public-key",transports:i.transports}))},r=await navigator.credentials.create({publicKey:n});if(!r)throw new Error("Failed to create credential");const a=r.response;return{id:r.id,rawId:B(r.rawId),response:{clientDataJSON:B(a.clientDataJSON),attestationObject:B(a.attestationObject),transports:a.getTransports?a.getTransports():void 0},type:"public-key"}}async function Gn(e){var s;const n={challenge:Y(e.challenge),rpId:e.rpId,timeout:e.timeout||6e4,userVerification:e.userVerification||"preferred",allowCredentials:(s=e.allowCredentials)==null?void 0:s.map(i=>({id:Y(i.id),type:"public-key",transports:i.transports}))},r=await navigator.credentials.get({publicKey:n});if(!r)throw new Error("Failed to get credential");const a=r.response;return{id:r.id,rawId:B(r.rawId),response:{clientDataJSON:B(a.clientDataJSON),authenticatorData:B(a.authenticatorData),signature:B(a.signature),userHandle:a.userHandle?B(a.userHandle):null},type:"public-key"}}function Pe(){return!!(typeof window<"u"&&typeof window.PublicKeyCredential<"u"&&navigator.credentials&&typeof navigator.credentials.create<"u"&&typeof navigator.credentials.get<"u")}async function zn(){if(!Pe())return!1;try{return typeof PublicKeyCredential<"u"&&typeof PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function"?await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable():!1}catch{return!1}}const fn=on(null);function Qn({children:e}){const[n,r]=y(null),[a,s]=y(!0);K(()=>{i()},[]);const i=async()=>{try{const l=await S.auth.me();r(l.user)}catch{r(null)}finally{s(!1)}},o=async l=>{try{const{options:p,user_id:f}=await S.auth.registerBegin(l),v=await Jn(p),w=await S.auth.registerFinish({user_id:f,credential:v});r(w.user)}catch(p){throw console.error("Registration failed:",p),p}},u=async l=>{try{const{options:p}=await S.auth.loginBegin(l),f=await Gn(p),v=await S.auth.loginFinish(f);r(v.user)}catch(p){throw console.error("Login failed:",p),p}},_=async l=>{try{const p=await S.auth.bootstrapLogin(l);r(p.user)}catch(p){throw console.error("Bootstrap login failed:",p),p}},c=async()=>{try{await S.auth.logout()}catch(l){console.error("Logout failed:",l)}finally{r(null)}},h={user:n,isAuthenticated:!!n,isAdmin:(n==null?void 0:n.is_admin)??!1,isLoading:a,login:u,register:o,bootstrapLogin:_,logout:c,refreshUser:i};return t(fn.Provider,{value:h,children:e})}function re(){const e=Cn(fn);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Ce(){const[e,n]=y(null),r="1.0.0";return K(()=>{(async()=>{try{const s=await S.auth.health();n(s)}catch(s){console.error("Failed to fetch version:",s)}})()},[]),e?t("div",{className:"version-info",children:[t("div",{className:"version-item",children:[t("span",{className:"version-label",children:"Backend:"}),t("span",{className:"version-value",children:["v",e.version,e.git_commit!=="unknown"&&t("span",{className:"version-commit",title:`Branch: ${e.git_branch}`,children:[" ","(",e.git_commit,")"]})]})]}),t("div",{className:"version-item",children:[t("span",{className:"version-label",children:"Frontend:"}),t("span",{className:"version-value",children:["v",r]})]}),e.build_date&&t("div",{className:"version-item",children:[t("span",{className:"version-label",children:"Built:"}),t("span",{className:"version-value",children:e.build_date})]})]}):t("div",{className:"version-info",children:t("div",{className:"version-item",children:[t("span",{className:"version-label",children:"Frontend:"}),t("span",{className:"version-value",children:["v",r]})]})})}function Yn(e){const{isAuthenticated:n}=re();return K(()=>{n&&D("/dashboard")},[n]),t("div",{className:"home-container",children:[t("div",{className:"hero",children:[t("h1",{children:"ðŸ” HOA"}),t("p",{className:"tagline",children:"Heavily Over-engineered Authentication"}),t("p",{className:"subtitle",children:"Passwordless authentication with WebAuthn/Passkeys"}),t("div",{className:"cta-buttons",children:[t("button",{className:"btn btn-primary btn-large",onClick:()=>D("/login"),children:"Sign In"}),t("button",{className:"btn btn-secondary btn-large",onClick:()=>D("/register"),children:"Create Account"})]})]}),t("div",{className:"features",children:[t("div",{className:"feature",children:[t("h3",{children:"ðŸ”’ Secure"}),t("p",{children:"Phishing-resistant authentication using FIDO2/WebAuthn standards"})]}),t("div",{className:"feature",children:[t("h3",{children:"ðŸš€ Fast"}),t("p",{children:"One-click login with Touch ID, Windows Hello, or security keys"})]}),t("div",{className:"feature",children:[t("h3",{children:"ðŸŽ¯ Simple"}),t("p",{children:"No passwords to remember, no SMS codes, no email verification"})]})]}),t("div",{style:{marginTop:"3rem"},children:t(Ce,{})})]})}function Xn(e){const{login:n,bootstrapLogin:r}=re(),[a,s]=y(""),[i,o]=y(""),[u,_]=y(!1),[c,h]=y(null),[l,p]=y(!1),[f,v]=y(!0),[w,m]=y(!1);return y(()=>{v(Pe()),zn().then(m)}),t("div",{className:"login-container",children:t("div",{className:"login-card",children:[t("h1",{children:"Sign In to HOA"}),!f&&t("div",{className:"warning",children:"âš ï¸ WebAuthn is not supported in this browser. Please use a modern browser."}),u?t("form",{onSubmit:async C=>{if(C.preventDefault(),!i.trim()){h("Please enter admin token");return}h(null),p(!0);try{await r(i),D("/dashboard")}catch($){console.error("Admin login error:",$),h($.message||"Invalid admin token")}finally{p(!1)}},children:[t("div",{className:"form-group",children:[t("label",{htmlFor:"token",children:"Admin Token"}),t("input",{id:"token",type:"password",value:i,onInput:C=>o(C.target.value),placeholder:"Enter bootstrap token",disabled:l,autoFocus:!0}),t("small",{children:["This token is generated on first startup and stored in"," ",t("code",{children:"~/.config/hoa/admin.txt"})]})]}),c&&t("div",{className:"error",children:c}),t("button",{type:"submit",className:"btn btn-primary",disabled:l,children:l?"Signing in...":"Sign in with Token"}),t("button",{type:"button",className:"btn btn-secondary",onClick:()=>{_(!1),h(null)},disabled:l,children:"â† Back to Passkey Login"})]}):t("form",{onSubmit:async C=>{if(C.preventDefault(),!a.trim()){h("Please enter your email or username");return}h(null),p(!0);try{await n(a),D("/dashboard")}catch($){console.error("Login error:",$),h($.message||"Login failed. Please try again.")}finally{p(!1)}},children:[t("div",{className:"form-group",children:[t("label",{htmlFor:"identifier",children:"Email or Username"}),t("input",{id:"identifier",type:"text",value:a,onInput:C=>s(C.target.value),placeholder:"you@example.com",disabled:l||!f,autoFocus:!0})]}),c&&t("div",{className:"error",children:c}),t("button",{type:"submit",className:"btn btn-primary",disabled:l||!f,children:l?"Signing in...":"ðŸ” Sign in with Passkey"}),w&&t("div",{className:"hint",children:["âœ¨ Use your ",navigator.platform.includes("Mac")?"Touch ID":"Windows Hello"," to sign in"]}),t("div",{className:"divider",children:"or"}),t("button",{type:"button",className:"btn btn-secondary",onClick:()=>_(!0),disabled:l,children:"Use Admin Token"}),t("div",{className:"footer-links",children:["Don't have an account? ",t("a",{href:"/register",children:"Register"})]})]})]})})}function Zn(e){const{register:n}=re(),[r,a]=y({nick:"",email:"",first_name:"",second_name:"",phone_number:""}),[s,i]=y(null),[o,u]=y(!1),[_]=y(Pe()),c=(l,p)=>{a(f=>({...f,[l]:p}))};return t("div",{className:"register-container",children:t("div",{className:"register-card",children:[t("h1",{children:"Create Account"}),t("p",{className:"subtitle",children:"Join HOA with passwordless authentication"}),!_&&t("div",{className:"warning",children:"âš ï¸ WebAuthn is not supported in this browser. Please use a modern browser."}),t("form",{onSubmit:async l=>{var f,v,w,m;if(l.preventDefault(),!r.nick.trim()){i("Username is required");return}if(!((f=r.email)!=null&&f.trim())){i("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){i("Please enter a valid email address");return}i(null),u(!0);try{await n({nick:r.nick,email:r.email,first_name:r.first_name||void 0,second_name:r.second_name||void 0,phone_number:r.phone_number||void 0}),D("/dashboard")}catch(g){console.error("Registration error:",g),(v=g.message)!=null&&v.includes("already exists")?i("A user with this email already exists"):(w=g.message)!=null&&w.includes("canceled")?i("Passkey creation was canceled. Please try again."):(m=g.message)!=null&&m.includes("NotAllowedError")?i("Unable to create passkey. Please check your authenticator."):i(g.message||"Registration failed. Please try again.")}finally{u(!1)}},children:[t("div",{className:"form-group",children:[t("label",{htmlFor:"nick",children:"Username *"}),t("input",{id:"nick",type:"text",value:r.nick,onInput:l=>c("nick",l.target.value),placeholder:"johndoe",disabled:o||!_,required:!0,autoFocus:!0})]}),t("div",{className:"form-group",children:[t("label",{htmlFor:"email",children:"Email *"}),t("input",{id:"email",type:"email",value:r.email,onInput:l=>c("email",l.target.value),placeholder:"john@example.com",disabled:o||!_,required:!0})]}),t("div",{className:"form-row",children:[t("div",{className:"form-group",children:[t("label",{htmlFor:"first_name",children:"First Name"}),t("input",{id:"first_name",type:"text",value:r.first_name,onInput:l=>c("first_name",l.target.value),placeholder:"John",disabled:o||!_})]}),t("div",{className:"form-group",children:[t("label",{htmlFor:"second_name",children:"Last Name"}),t("input",{id:"second_name",type:"text",value:r.second_name,onInput:l=>c("second_name",l.target.value),placeholder:"Doe",disabled:o||!_})]})]}),t("div",{className:"form-group",children:[t("label",{htmlFor:"phone_number",children:"Phone Number"}),t("input",{id:"phone_number",type:"tel",value:r.phone_number,onInput:l=>c("phone_number",l.target.value),placeholder:"+1 (555) 123-4567",disabled:o||!_})]}),s&&t("div",{className:"error",children:s}),t("div",{className:"info",children:"â„¹ï¸ After submitting, you'll be prompted to create a passkey using your device's authenticator (Touch ID, Windows Hello, or security key)."}),t("button",{type:"submit",className:"btn btn-primary",disabled:o||!_,children:o?"Creating account...":"ðŸ” Create Account & Passkey"}),t("div",{className:"footer-links",children:["Already have an account? ",t("a",{href:"/login",children:"Sign in"})]})]})]})})}function et(e){const{user:n,isAuthenticated:r,isAdmin:a,logout:s}=re(),[i,o]=y([]),[u,_]=y(!0),[c,h]=y(null);K(()=>{r||D("/login")},[r]),K(()=>{r&&l()},[r]);const l=async()=>{try{_(!0);const m=await S.user.getAuthMethods();o(m)}catch(m){console.error("Failed to load auth methods:",m),h("Failed to load authentication methods")}finally{_(!1)}},p=async m=>{if(confirm("Are you sure you want to delete this authentication method?"))try{await S.user.deleteAuthMethod(m),await l()}catch(g){console.error("Failed to delete auth method:",g),alert(g.message||"Failed to delete authentication method")}},f=async()=>{await s(),D("/login")};if(!n)return null;const v=m=>{switch(m){case"passkey":return"ðŸ”";case"password":return"ðŸ”‘";case"oauth2":return"ðŸŒ";case"token":return"ðŸŽ«";default:return"â“"}},w=m=>{switch(m.type){case"passkey":return`Passkey (${m.identifier||m.id.substring(0,8)})`;case"password":return`Password (${m.identifier||"primary"})`;case"oauth2":return`OAuth2 - ${m.provider}`;case"token":return`Token - ${m.description}`;default:return"Unknown method"}};return t("div",{className:"dashboard-container",children:[t("div",{className:"dashboard-header",children:[t("h1",{children:"Dashboard"}),t("button",{className:"btn btn-secondary",onClick:f,children:"Logout"})]}),t("div",{className:"card",children:[t("h2",{children:"Profile"}),t("div",{className:"profile-info",children:[t("div",{className:"info-row",children:[t("span",{className:"label",children:"Username:"}),t("span",{className:"value",children:n.nick||"(not set)"})]}),n.email&&t("div",{className:"info-row",children:[t("span",{className:"label",children:"Email:"}),t("span",{className:"value",children:n.email})]}),n.first_name&&t("div",{className:"info-row",children:[t("span",{className:"label",children:"First Name:"}),t("span",{className:"value",children:n.first_name})]}),n.second_name&&t("div",{className:"info-row",children:[t("span",{className:"label",children:"Last Name:"}),t("span",{className:"value",children:n.second_name})]}),n.phone_number&&t("div",{className:"info-row",children:[t("span",{className:"label",children:"Phone:"}),t("span",{className:"value",children:n.phone_number})]}),t("div",{className:"info-row",children:[t("span",{className:"label",children:"Status:"}),t("span",{className:`badge ${n.enabled?"badge-success":"badge-danger"}`,children:n.enabled?"Active":"Disabled"})]}),a&&t("div",{className:"info-row",children:[t("span",{className:"label",children:"Role:"}),t("span",{className:"badge badge-primary",children:"Administrator"})]}),t("div",{className:"info-row",children:[t("span",{className:"label",children:"Member since:"}),t("span",{className:"value",children:new Date(n.created_at).toLocaleDateString()})]})]}),t("button",{className:"btn btn-secondary",onClick:()=>alert("Edit profile coming soon!"),children:"Edit Profile"})]}),t("div",{className:"card",children:[t("h2",{children:"Authentication Methods"}),u?t("div",{className:"loading",children:"Loading authentication methods..."}):c?t("div",{className:"error",children:c}):t(te,{children:[t("div",{className:"auth-methods-list",children:i.map(m=>t("div",{className:"auth-method-item",children:[t("div",{className:"method-info",children:[t("span",{className:"method-icon",children:v(m.type)}),t("div",{className:"method-details",children:[t("div",{className:"method-label",children:w(m)}),t("div",{className:"method-meta",children:[!m.enabled&&t("span",{className:"badge badge-danger",children:"Disabled"}),m.requires_approval&&!m.approved&&t("span",{className:"badge badge-warning",children:"Pending Approval"}),t("span",{className:"method-created",children:["Added ",new Date(m.created_at).toLocaleDateString()]})]})]})]}),t("div",{className:"method-actions",children:i.length>1&&t("button",{className:"btn btn-danger btn-sm",onClick:()=>p(m.id),children:"Delete"})})]},m.id))}),i.length===0&&t("div",{className:"empty-state",children:"No authentication methods configured"})]}),t("button",{className:"btn btn-primary",onClick:()=>alert("Add authentication method coming soon!"),children:"+ Add Authentication Method"})]}),a&&t("div",{className:"card",children:[t("h2",{children:"Administration"}),t("p",{children:"You have administrative privileges."}),t("button",{className:"btn btn-primary",onClick:()=>D("/admin"),children:"Go to Admin Panel"})]}),t("div",{style:{marginTop:"2rem"},children:t(Ce,{})})]})}function nt(e){const{user:n,isAuthenticated:r,isAdmin:a}=re(),[s,i]=y("users"),[o,u]=y([]),[_,c]=y([]),[h,l]=y(null),[p,f]=y([]),[v,w]=y(null),[m,g]=y(null),[b,C]=y(""),[$,H]=y(!0),[R,W]=y(null),[x,L]=y(null);K(()=>{r?a||D("/dashboard"):D("/login")},[r,a]),K(()=>{r&&a&&(s==="users"?V():F())},[r,a,s,v,m]);const V=async()=>{try{H(!0),W(null);let k=await S.admin.listUsers();if(v!==null&&(k=k.filter(U=>U.enabled===v)),m!==null&&(k=k.filter(U=>U.is_admin===m)),b){const U=b.toLowerCase();k=k.filter(ae=>{var Le,De,Fe,Ee;return((Le=ae.nick)==null?void 0:Le.toLowerCase().includes(U))||((De=ae.email)==null?void 0:De.toLowerCase().includes(U))||((Fe=ae.first_name)==null?void 0:Fe.toLowerCase().includes(U))||((Ee=ae.second_name)==null?void 0:Ee.toLowerCase().includes(U))})}u(k)}catch(d){console.error("Failed to load users:",d),W(d.message||"Failed to load users")}finally{H(!1)}},F=async()=>{try{H(!0),W(null);const d=await S.admin.getPendingApprovals();c(d)}catch(d){console.error("Failed to load pending approvals:",d),W(d.message||"Failed to load pending approvals")}finally{H(!1)}},I=async d=>{try{L("user-details");const k=await S.admin.getUser(d),U=await S.admin.getUserAuthMethods(d);l(k),f(U)}catch(k){console.error("Failed to load user details:",k),alert(`Failed to load user details: ${k.message}`)}finally{L(null)}},mn=async(d,k)=>{if(confirm("Are you sure you want to toggle this user's enabled status?"))try{L(`toggle-user-${d}`),await S.admin.toggleUser(d,!k),await V(),(h==null?void 0:h.id)===d&&await I(d)}catch(U){console.error("Failed to toggle user:",U),alert(`Failed to toggle user: ${U.message}`)}finally{L(null)}},$e=async d=>{try{L(`approve-${d}`),await S.admin.approveAuthMethod(d,!0),await F(),h&&await I(h.id)}catch(k){console.error("Failed to approve auth method:",k),alert(`Failed to approve: ${k.message}`)}finally{L(null)}},Se=async(d,k)=>{if(confirm("Are you sure you want to toggle this authentication method?"))try{L(`toggle-auth-${d}`),await S.admin.toggleAuthMethod(d,!k),h&&await I(h.id)}catch(U){console.error("Failed to toggle auth method:",U),alert(`Failed to toggle auth method: ${U.message}`)}finally{L(null)}},G=d=>new Date(d).toLocaleString(),Ue=d=>{switch(d){case"passkey":return"ðŸ”";case"password":return"ðŸ”‘";case"oauth2":return"ðŸŒ";case"token":return"ðŸŽŸï¸";default:return"â“"}};return!r||!a?null:t("div",{className:"container",children:[t("div",{className:"admin-header",children:[t("div",{children:[t("h1",{children:"Admin Panel"}),t("p",{children:"Manage users and authentication methods"})]}),t("button",{className:"btn btn-secondary",onClick:()=>D("/dashboard"),children:"â† Back to Dashboard"})]}),t("div",{className:"tabs",children:[t("button",{className:`tab ${s==="users"?"active":""}`,onClick:()=>i("users"),children:["Users (",o.length,")"]}),t("button",{className:`tab ${s==="approvals"?"active":""}`,onClick:()=>i("approvals"),children:["Pending Approvals (",_.length,")"]})]}),R&&t("div",{className:"alert alert-error",children:[R,t("button",{onClick:()=>W(null),children:"âœ•"})]}),s==="users"&&t("div",{className:"admin-content",children:[t("div",{className:"card",children:[t("h3",{children:"Filters"}),t("div",{className:"filters",children:[t("div",{className:"filter-group",children:[t("label",{children:"Search"}),t("input",{type:"text",placeholder:"Search by name, email, nick...",value:b,onChange:d=>C(d.target.value),className:"input"})]}),t("div",{className:"filter-group",children:[t("label",{children:"Status"}),t("select",{value:v===null?"all":String(v),onChange:d=>{const k=d.target.value;w(k==="all"?null:k==="true")},className:"input",children:[t("option",{value:"all",children:"All Users"}),t("option",{value:"true",children:"Enabled Only"}),t("option",{value:"false",children:"Disabled Only"})]})]}),t("div",{className:"filter-group",children:[t("label",{children:"Role"}),t("select",{value:m===null?"all":String(m),onChange:d=>{const k=d.target.value;g(k==="all"?null:k==="true")},className:"input",children:[t("option",{value:"all",children:"All Roles"}),t("option",{value:"true",children:"Admins Only"}),t("option",{value:"false",children:"Users Only"})]})]}),t("button",{onClick:()=>{C(""),w(null),g(null)},className:"btn btn-secondary",children:"Clear Filters"})]})]}),t("div",{className:"card",children:[t("h3",{children:"Users"}),$?t("p",{children:"Loading users..."}):o.length===0?t("p",{children:"No users found matching the filters."}):t("div",{className:"user-table",children:t("table",{children:[t("thead",{children:t("tr",{children:[t("th",{children:"Nick"}),t("th",{children:"Email"}),t("th",{children:"Name"}),t("th",{children:"Role"}),t("th",{children:"Status"}),t("th",{children:"Created"}),t("th",{children:"Actions"})]})}),t("tbody",{children:o.map(d=>t("tr",{className:d.enabled?"":"user-disabled",children:[t("td",{children:[t("strong",{children:d.nick||"â€”"}),d.id===(n==null?void 0:n.id)&&t("span",{className:"badge badge-info",children:"You"})]}),t("td",{children:d.email||"â€”"}),t("td",{children:d.first_name&&d.second_name?`${d.first_name} ${d.second_name}`:"â€”"}),t("td",{children:d.is_admin?t("span",{className:"badge badge-warning",children:"Admin"}):t("span",{className:"badge badge-secondary",children:"User"})}),t("td",{children:d.enabled?t("span",{className:"badge badge-success",children:"Enabled"}):t("span",{className:"badge badge-error",children:"Disabled"})}),t("td",{children:G(d.created_at)}),t("td",{children:t("div",{className:"action-buttons",children:[t("button",{onClick:()=>I(d.id),className:"btn btn-sm btn-primary",disabled:x==="user-details",children:"Details"}),t("button",{onClick:()=>mn(d.id,d.enabled),className:`btn btn-sm ${d.enabled?"btn-warning":"btn-success"}`,disabled:x===`toggle-user-${d.id}`||d.id===(n==null?void 0:n.id),title:d.id===(n==null?void 0:n.id)?"Cannot toggle your own account":"",children:d.enabled?"Disable":"Enable"})]})})]},d.id))})]})})]}),h&&t("div",{className:"modal-overlay",onClick:()=>l(null),children:t("div",{className:"modal-content",onClick:d=>d.stopPropagation(),children:[t("div",{className:"modal-header",children:[t("h2",{children:"User Details"}),t("button",{className:"modal-close",onClick:()=>l(null),children:"âœ•"})]}),t("div",{className:"modal-body",children:[t("div",{className:"user-details-grid",children:[t("div",{className:"detail-item",children:[t("strong",{children:"ID:"}),t("span",{className:"monospace",children:h.id})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Nick:"}),t("span",{children:h.nick||"â€”"})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Email:"}),t("span",{children:h.email||"â€”"})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Name:"}),t("span",{children:h.first_name&&h.second_name?`${h.first_name} ${h.second_name}`:"â€”"})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Phone:"}),t("span",{children:h.phone_number||"â€”"})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Role:"}),t("span",{children:h.is_admin?"Admin":"User"})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Status:"}),t("span",{children:h.enabled?"Enabled":"Disabled"})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Created:"}),t("span",{children:G(h.created_at)})]}),t("div",{className:"detail-item",children:[t("strong",{children:"Updated:"}),t("span",{children:G(h.updated_at)})]})]}),t("h3",{style:{marginTop:"2rem"},children:"Authentication Methods"}),p.length===0?t("p",{children:"No authentication methods found."}):t("div",{className:"auth-methods-list",children:p.map(d=>t("div",{className:"auth-method-item",children:[t("div",{className:"auth-method-header",children:[t("span",{className:"auth-method-icon",children:Ue(d.type)}),t("strong",{children:d.identifier||d.type}),d.enabled?t("span",{className:"badge badge-success",children:"Enabled"}):t("span",{className:"badge badge-error",children:"Disabled"}),d.requires_approval&&!d.approved&&t("span",{className:"badge badge-warning",children:"Pending"})]}),t("div",{className:"auth-method-details",children:[t("small",{children:["Type: ",d.type]}),t("small",{children:["Created: ",G(d.created_at)]})]}),t("div",{className:"auth-method-actions",children:[d.requires_approval&&!d.approved&&t("button",{onClick:()=>$e(d.id),className:"btn btn-sm btn-success",disabled:x===`approve-${d.id}`,children:"Approve"}),t("button",{onClick:()=>Se(d.id,d.enabled),className:`btn btn-sm ${d.enabled?"btn-warning":"btn-success"}`,disabled:x===`toggle-auth-${d.id}`,children:d.enabled?"Disable":"Enable"})]})]},d.id))})]})]})})]}),s==="approvals"&&t("div",{className:"admin-content",children:t("div",{className:"card",children:[t("h3",{children:"Pending Authentication Method Approvals"}),$?t("p",{children:"Loading pending approvals..."}):_.length===0?t("p",{children:"No pending approvals."}):t("div",{className:"approvals-list",children:_.map(d=>t("div",{className:"approval-item card",children:[t("div",{className:"approval-header",children:[t("span",{className:"auth-method-icon",children:Ue(d.type)}),t("div",{children:[t("strong",{children:d.identifier||d.type}),t("br",{}),t("small",{className:"text-muted",children:["Type: ",d.type]})]}),t("span",{className:"badge badge-warning",children:"Pending Approval"})]}),t("div",{className:"approval-details",children:[t("p",{children:[t("strong",{children:"User ID:"})," ",t("span",{className:"monospace",children:d.user_id})]}),t("p",{children:[t("strong",{children:"Created:"})," ",G(d.created_at)]}),t("p",{children:[t("strong",{children:"Enabled:"})," ",d.enabled?"Yes":"No"]})]}),t("div",{className:"approval-actions",children:[t("button",{onClick:()=>$e(d.id),className:"btn btn-success",disabled:x===`approve-${d.id}`,children:x===`approve-${d.id}`?"Approving...":"Approve"}),t("button",{onClick:()=>Se(d.id,d.enabled),className:"btn btn-error",disabled:x===`toggle-auth-${d.id}`,children:"Disable"})]})]},d.id))})]})}),t("div",{style:{marginTop:"3rem"},children:t(Ce,{})})]})}function tt(e){return t("div",{className:"not-found-container",children:t("div",{className:"not-found-content",children:[t("h1",{children:"404"}),t("h2",{children:"Page Not Found"}),t("p",{children:"The page you're looking for doesn't exist."}),t("button",{className:"btn btn-primary",onClick:()=>D("/"),children:"Go Home"})]})})}function rt(){return t(Qn,{children:t("div",{id:"app",children:t(_n,{children:[t(Yn,{path:"/"}),t(Xn,{path:"/login"}),t(Zn,{path:"/register"}),t(et,{path:"/dashboard"}),t(nt,{path:"/admin"}),t(tt,{default:!0})]})})})}async function at(){try{const r=await(await fetch("/config.json")).json();r.api_base_url&&Je(r.api_base_url),console.log("Loaded config:",r)}catch(n){console.warn("Failed to load config.json, using defaults:",n),Je("/api")}const e=document.getElementById("app");e&&wn(t(rt,{}),e)}at();
